<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/fp.js | functional</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Tiny library for functional programming in JS"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="functional"><meta property="twitter:description" content="Tiny library for functional programming in JS"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-compose">compose</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-curry">curry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-flatten">flatten</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isEmpty">isEmpty</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-not">not</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-pf">pf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-pipe">pipe</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-reverse">reverse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-catchError">catchError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-doif">doif</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-equals">equals</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-every">every</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-filter">filter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-find">find</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-forEach">forEach</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-forIn">forIn</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-map">map</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-mapIn">mapIn</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-omit">omit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-pick">pick</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-prop">prop</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-propEq">propEq</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-props">props</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-reduce">reduce</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-some">some</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-tap">tap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-then">then</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-thenCatch">thenCatch</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/fp.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">
/**
 * Currying refers to the process of transforming a function 
 * with multiple arity into the same function with less arity. 
 * @param {*} f 
 * @param  {...any} xs 
 */
export const curry = (f, ...xs) =&gt;
  xs.length &gt;= f.length ? f(...xs) : (...moreXs) =&gt; curry(f, ...xs, ...moreXs)

/**
 * Runs the given function with the supplied object, 
 * then returns the object.
 */
export const tap = curry((fn, x) =&gt; {
  fn(x)
  return x
})

/**
 * Curried pointfree wrapper for functor methods.
*/
export const pf = (arity, method) =&gt;
  function pointfree(...xs) {
    return [...xs].length &gt;= arity + 1
      ? xs[arity][method](...xs.slice(0, arity))
      : (...moreXs) =&gt; pointfree(...xs, ...moreXs)
  }

/**
 * Performs left-to-right function composition. 
 * The leftmost function may have any arity; 
 * the remaining functions must be unary.
 * @param  {...any} fs
 */
export const pipe = (...fs) =&gt; fs.reduceRight((f, g) =&gt; (...xs) =&gt; f(g(...xs)))

/**
 * Performs right-to-left function composition. 
 * The rightmost function may have any arity; 
 * the remaining functions must be unary.
 * @param  {...any} fs
 */
export const compose = (...fs) =&gt; fs.reduce((f, g) =&gt; (...xs) =&gt; f(g(...xs)))

/**
 * Takes predicate, fn and argument
 * Returns result of fn(arg) if pred(arg) evaluates to true
 * Returns arg otherwise
 */
export const doif = curry((pred, fn, arg) =&gt; pred(arg) &amp;&amp; fn(arg) || arg)

/**
 * Pointfree wrapper for map method
 */
export const map = pf(1, &quot;map&quot;)

/**
 * Pointfree wrapper for forEach method
 */
export const forEach = pf(1, &quot;forEach&quot;)

/**
 * Pointfree wrapper for reduce method
 */
export const reduce = pf(2, &quot;reduce&quot;)

/**
 * Pointfree wrapper for filter method
 */
export const filter = pf(1, &quot;filter&quot;)

/**
 * Pointfree wrapper for find method
 */
export const find = pf(1, &quot;find&quot;)

/**
 * Pointfree wrapper for some method
 */
export const some = pf(1, &quot;some&quot;)

/**
 * Pointfree wrapper for every method
 */
export const every = pf(1, &quot;every&quot;)

/**
 * Returns a partial copy of an object containing only the keys specified.
 * If the key does not exist, the property is ignored.
 */
export const pick = curry((whitelist, obj) =&gt;
  Object.entries(obj)
    .filter(([key]) =&gt; whitelist.includes(key))
    .reduce((obj, [key, val]) =&gt; Object.assign(obj, { [key]: val }), {})
)

/**
 * Returns a partial copy of an object omitting the keys specified.
 */
export const omit = curry((blacklisted, obj) =&gt;
  Object.entries(obj)
    .filter(([key]) =&gt; !blacklisted.includes(key))
    .reduce((obj, [key, val]) =&gt; Object.assign(obj, { [key]: val }), {})
)

/**
 * Reverse a string or an array
 * @param {*} list - string or an array
 */
export const reverse = list =&gt; {

  if (!(typeof list === &quot;string&quot; || Array.isArray(list))) {
    throw new Error(&quot;Invalid argument.&quot;)
  }

  return typeof list === &quot;string&quot;
    ? list
      .split(&quot;&quot;)
      .reverse()
      .join(&quot;&quot;)
    : Array.prototype.slice.call(list, 0).reverse()
}

/**
 * Returns a new list by pulling every item out of it 
 * and putting them in a new array.
 * Won&apos;t wirk for nesting deeper than two levels
 * @param {array} arr 
 */
export const flatten = arr =&gt; [].concat.apply([], arr)

/**
 * Check if an array is empty
 * @param {array} array 
 */
export const isEmpty = array =&gt; Array.isArray(array) &amp;&amp; array.length === 0

/**
 * Iterate over an input object, calling a provided function fn for each property
 */
export const forIn = curry((fn, obj) =&gt;
  Object.keys(obj).forEach(key =&gt; fn(obj[key], key))
)

/**
 * Takes a function and a object, applies the function to each of the object&apos;s values, 
 * and returns an object of the same shape
 */
export const mapIn = curry((fn, obj) =&gt;
  Object.keys(obj).reduce((newObj, key) =&gt; {
    newObj[key] = fn(obj[key])
    return newObj
  }, {})
)

/**
 * Takes an object and list of properties and returns an array of their values
 */
export const props = curry((propsList, obj) =&gt;
  Object.entries(obj)
    .filter(([key]) =&gt; propsList.includes(key))
    .reduce((arr, [key, val]) =&gt; arr.concat(val), [])
)

/**
 * Returns opposite value of boolean
 * @param {boolean} a 
 */
export const not = a =&gt; !a

/**
 * Checks if two values are equal
 */
export const equals = curry((a, b) =&gt; {
  // Equals implementation from ramda
  // SameValue algorithm
  return a === b
    ? // Steps 1-5, 7-10
    // Steps 6.b-6.e: +0 != -0
    a !== 0 || 1 / a === 1 / b
    : // Step 6.a: NaN == NaN
    a !== a &amp;&amp; b !== b
})

/**
 * Returns propertyvalue of an object
 */
export const prop = curry((prop, obj) =&gt; obj[prop])

/**
 * Compares property value with provided value
 */
export const propEq = curry((name, val, obj) =&gt; equals(val, obj[name]))

/**
 * Pointfree wrapper for Promise.then
 */
export const then = curry((onThen, promise) =&gt; promise.then(onThen))

/**
 * Pointfree wrapper for Promise.catch
 */
export const catchError = curry((onCatch, promise) =&gt; promise.catch(onCatch))

/**
 * Pointfree wrapper for Promise.then with error handling
 */
export const thenCatch = curry((onThen, onError, promise) =&gt;
  promise.then(onThen, onError)
)

export default {
  catchError,
  curry,
  compose,
  doif,
  every,
  equals,
  filter,
  forEach,
  forIn,
  find,
  flatten,
  isEmpty,
  map,
  mapIn,
  not,
  omit,
  pf,
  pick,
  pipe,
  prop,
  props,
  propEq,
  reduce,
  reverse,
  some,
  then,
  thenCatch,
  tap
}

</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
